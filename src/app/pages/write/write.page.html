<ion-content [fullscreen]="true">
  <ion-header>
    <ion-toolbar>
      <ion-buttons slot="start">
        <app-press-hold-button
          buttonId="back-btn"
          actionId="back-action"
          color="medium"
          [holdDuration]="2000"
          ariaLabel="Botón de volver. Mantener presionado 2 segundos para regresar a la página principal"
          (actionExecuted)="onBackAction($event)"
        >
          ← Volver
        </app-press-hold-button>
      </ion-buttons>
      <ion-title>Escribir Texto</ion-title>
    </ion-toolbar>
  </ion-header>

  <div class="write-container">
    <!-- PARTE SUPERIOR - 10% -->
    <app-text-input-section
      [(textContent)]="textContent"
      (speakAction)="onSpeakAction($event)"
    ></app-text-input-section>

    <!-- PARTE CENTRAL - 80% (Condicional según estado) -->

    <!-- Estado: 'groups' - Mostrar grupos de letras -->
    <app-letter-keyboard-section
      *ngIf="viewState === 'groups'"
      [letterGroups]="letterGroups"
      [viewMode]="viewMode"
      (letterGroupHoldStart)="onLetterGroupHoldStart($event.actionId, $event.group)"
      (letterGroupAction)="onLetterGroupAction($event.actionId, $event.group)"
    ></app-letter-keyboard-section>

    <!-- Estado: 'letters' - Mostrar letras individuales (Panel) -->
    <app-letter-grid-view
      *ngIf="viewState === 'letters' && viewMode === 'panel'"
      [letters]="currentLetters"
      (letterHoldStart)="onLetterHoldStart($event)"
      (letterSelected)="onLetterSelected($event)"
    ></app-letter-grid-view>

    <!-- Estado: 'letters' - Mostrar letras individuales (Carrusel) -->
    <app-letter-carousel-view
      *ngIf="viewState === 'letters' && viewMode === 'carousel'"
      [letters]="currentLetters"
      (letterHoldStart)="onLetterHoldStart($event)"
      (letterSelected)="onLetterSelected($event)"
    ></app-letter-carousel-view>

    <!-- PARTE INFERIOR - 10% -->
    <app-action-buttons-section
      (spaceAction)="onSpaceAction($event)"
      (backspaceAction)="onBackspaceAction($event)"
      (clearAction)="onClearAction($event)"
      (punctuationAction)="onPunctuationAction($event)"
    ></app-action-buttons-section>
  </div>
</ion-content>
