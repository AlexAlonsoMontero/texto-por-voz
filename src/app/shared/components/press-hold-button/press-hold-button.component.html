<!-- Botón nativo de Ionic sin clases personalizadas -->
<ion-button
  #buttonRef
  [id]="buttonId"
  [color]="color"
  [disabled]="disabled"
  [attr.aria-label]="getAccessibilityText()"
  [attr.aria-pressed]="isPressing()"
  fill="solid"
  size="large"
  expand="block"
>
  <!-- Contenido directo sin wrappers -->
  <ng-content></ng-content>

  <!-- Círculo de progreso -->
  <div class="progress-overlay" *ngIf="isPressing()">
    <svg class="progress-circle" width="32" height="32" viewBox="0 0 32 32" aria-hidden="true">
      <circle
        #progressCircle
        cx="16"
        cy="16"
        r="14"
        fill="none"
        stroke="currentColor"
        stroke-width="3"
        stroke-linecap="round"
        class="progress-foreground"
        transform="rotate(-90 16 16)"
        [attr.stroke-dasharray]="getCircumference()"
        [attr.stroke-dashoffset]="getCircumference() * (1 - getProgress() / 100)"
      />
    </svg>
  </div>
</ion-button>

<!-- Accesibilidad -->
<div class="sr-only" [attr.aria-live]="isPressing() ? 'polite' : null">
  <span *ngIf="isPressing()">Presionando... {{ getProgress().toFixed(0) }}% completado</span>
</div>
